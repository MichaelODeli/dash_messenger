# Changelog
Рекомендуется ознакомиться с [системой обозначения версий](/docs/VERSIONS.md)

# Содержание
- [Этап webui](#этап-webui) (26.04-04.05)
- [Этап server](#этап-server) (04.05-12.05)


## Этап **server**
### [server 3.0.1205]
- **Завершение разработки этапа server**
- Комментарии к коду серверной части
- Добавлен метод для проверки соединения
- Новое поле в `getMessages` для частичного получения списка сообщений

### [server 2.6.1105]
- Добавлен метод `createChat`
    - Если собеседника не существует - будет отказано с кодом 409
    - Если собеседник существует - будет возвращен код чата и код 200
- Исправление сетевых интерфейсов в docker-compose
- Исправление IP адреса WebSocket-сервера
- Перенос примечаний к методам на страницу с roadmap

### [server 2.5.0905]
- Проверка передаваемых данных пользователем
- Правка [roadmap](/README.md#этапы-создания-приложения-roadmap) проекта
- Добавлены timestamp для запросов
- Добавлен метод `sendMessage`
- Добавлен метод `register`
    - После регистрации - выдается токен (аналогично процессу авторизации)
    - Если никнейм существует - HTTP 409 (Conflict) и повторная попытка регистрации
- Исправление уязвимостей
    - Отправка сообщений в чат человеком, не являющимся его участником
    - Получение списка сообщений чата человеком, не являющимся его участником
- Описание кодов состояний

### [server 2.3.0905]
- Правка выводов данных на тестовой странице
- Реализация метода `getChats`
- Реализация метода `getMessages`
- Замена названий колонок и таблиц в БД (`conversation` -> `chat`)

### [server 2.2.0805]
- Добавлена проверка валидности токена
    - Токен будет действителен 5 дней с момента его получения или обновления
    - Каждая операция под токеном юзера продлевает его действие
- Автоудаление неактивных токенов
- Добавлен метод `logout` для ручного отзыва токена
- Токен генерируется в формате UUID4

### [server 2.0.0805]
- Доработка [страницы для отладки методов websocket](/server/ws_server/ws_server_tests.py)
    - Для теста доступен метод - `auth`. Тестовые данные - `test`/`test`. В ответ выдается токен в виде рандомного набора цифр. Иначе - HTTP 401.
    - Токен сохраняется в памяти браузера и не очищается при Ctrl+F5. В дальнейшем для удаления токена будет использоваться метод `logout`.
- Начало разработки WS-сервера
    - Обработка поступающих сообщений
    - Обращение к БД
    - Отправка результата
    - Реализована работа метода -`auth`

### [server 1.1.0705]
- Создана структура [страницы для отладки методов websocket](/server/ws_server/ws_server_tests.py)
- Дополнение [страницы с методами работы WS-сервера](/docs/WS_SERVER_REFERENCE.md)

### [server 1.0.0505]
- Правки файловой структуры проекта
    - Справочная документация находится в папке [docs](/docs/)
- Подготовка [docker-контейнера](/docker-compose.yaml) для более простой отладки приложения. В контейнер входят:
    - БД PostgreSQL
    - Python 3.10.8 для WebSocket сервера
    - Python 3.10.8 для frontend сервера
- Подготовка демо-данных для проверки работы БД
- Подготовка структуры запросов сервера
- Подготовка минимальной инструкции по запуску docker-контейнера

### [server 0.2.0505]
- Более подробное описание [README.md](/README.md)
- [Проектирование запросов и ответов WS-сервера](/docs/WS_SERVER_REFERENCE.md)
- Правка высоты мессенджера

### [server 0.1.0405]
- Создана [структура таблиц в БД и их взаимосвязи](/docs/DB_REFERENCE.md)
- Сделан скрипт создания таблиц с взаимосвязями

## Этап **webui**
### [webui 1.8.0405]
- **Завершение разработки этапа webUI**
- Модалки для управления контактами
- Отключение некоторых кнопок, функциональность которых будет реализована позднее
    - Добавление вложений
    - Блокировка собеседника
    - Отключение уведомлений
    - Работа с беседами

### [webui 1.7.0305]
- Создан [файл](/docs/COMPONENTS.md) для ведения учета компонентов и функций приложения
- Исправление высоты мессенджера на телефоне (чтоб не было перекрытия поля ввода нижней панелью браузера)
- dbc.Popover заменен на dmc.HoverCard
- Модалка выбора стикеров (доступна только с ПК)
- Модалка выбора вложения (доступна только с ПК)
- Исправление названий некоторых компонентов

### [webui 1.6.3004]
- **Управление аккаунтом**:
    - Наполнение страницы настроек с параметрами приватности
    - Перемещение вкладок на левую сторону экрана (названия табов будут скрыты на телефоне)
- **Мессенджер**:
    - Добавлена генерация сообщений в мессенджер
    - Кебаб-меню для некоторых операций с текущим собеседником
    - Редактирование списка чатов будет доступно только с ПК (на dmc.Drawer не отображаются dbc.Popover)
    - Добавлена кнопка прокрутки диалога вниз
    - Небольшая переделка рамок в мессенджере

### [webui 1.5.2904]
- Миграция dash-mantine-components на версию 0.14.x
- Создан [requirements.txt](requirements.txt)
- Создано боковое меню для контактов (для открытия с телефонов)
- Реализация страницы мессенджера
    - Панель ввода сообщения
    - Верхняя панель с "тремя точками", ником собеседника и кнопкой открытия бокового меню контактов (только на телефоне)
    - Центральная панель с сообщениями (сами сообщения реализованы в [webui 1.6.3004](#webui-163004), в данной версии для теста отображается список контактов)
- Повторная работа с высотой экрана и адаптацией интерфейса под неё
- Небольшая переработка CSS стилей


### [webui 1.4.2904]
- Начало разработки экрана мессенджера
    - Адаптивности нет (ввиду разработки только части экрана)
    - Разработана левая колонка со списком контактов (с фиксированной высотой, иначе скролл не появлялся)
- Уменьшение толщины скролл-бара

### [webui 1.3.2804]
> Обратите внимание, [коммит a01395c](https://github.com/MichaelODeli/dash_messenger/commit/d286a64daea8bfd5ce93b52f2876513d248d7d08) был откачен ввиду сломанного дизайна из-за адаптации к 100% высоте экрана и добавления скролл-бара в месенджере. В [коммите cf33611](https://github.com/MichaelODeli/dash_messenger/commit/cf33611a80476d67e51d814cb9d0362a01a43de8) все исправлено.
- Наполнение страницы с личным кабинетом (данные аккаунта и восстановление пароля)
- Добавление нового файла в документации - скриншоты проекта

### [webui 1.2.2804]
- Страница регистрации
- Страница восстановления аккаунта
- Кастомная страница с 404
- Страница личного кабинета без наполнения
- Исправление высоты страницы (с адаптацией к `100vh`)

### [webui 1.0.2704]
- Приветственная страница с формой авторизации (callback будут сделаны в следующей версии)
- Хеадер с возможностью переключения темы приложения
- Тело приложения адаптивно.
    - На ПК версии основной контейнер шириной 10 колонок, по бокам по 1 колонке для отступов
    - На мобильной версии боковые колонки скрыты, приложение растянуто по всю ширину
    - Адаптация под vh устройства - тело приложения имеет 100% высоту под любой экран

### [webui 0.1.2604]
- Описание [структуры проекта](README.md)
- Описание [системы обозначения версий](/docs/VERSIONS.md)
- Подготовка файловой структуры проекта